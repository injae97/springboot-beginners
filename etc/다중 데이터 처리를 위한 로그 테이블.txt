## ğŸ’¡ ë‹¤ì¤‘ ë°ì´í„° ì²˜ë¦¬ë¥¼ ìœ„í•œ ë¡œê·¸ í…Œì´ë¸” ìƒì„±

    CREATE TABLE `log` (
        `no` INT NOT NULL AUTO_INCREMENT,
        `coffee_no` INT NULL DEFAULT '0',
        `price` INT NULL DEFAULT '0',
        `reg_day` DATETIME NULL DEFAULT CURRENT_TIMESTAMP(),
        PRIMARY KEY (`no`)
    )
    COMMENT='ê°€ê²© ë¡œê·¸'
    COLLATE='utf8mb4_general_ci'
    ;


## ğŸ’¡ [UPDATE] - ë‹¤ì¤‘ ê°€ê²© ë°ì´í„° ìˆ˜ì •(ì²´í¬ë°•ìŠ¤), [INSERT] - ìˆ˜ì •í•œ ê°€ê²© ë°ì´í„° ë“±ë¡
    a. html 
        a. /src/main/resources/templates/menu/menu.html
            - ì²´í¬ ë°•ìŠ¤ ê¸°ëŠ¥ ë¶€ì—¬ í›„ ë‹¤ì¤‘ ë°ì´í„° ì²˜ë¦¬ë¥¼ í•˜ê¸° ìœ„í•¨
            
                <!--MenuConì— listì— ë„£ì€ ê°’ì„ í˜¸ì¶œ -->
                <!-- Thymeleaf - for loop -->      
                <tr th:each="prod : ${list}">
                    <td><input type="checkBox" name="chkCoffeeNo" th:value="${prod.get('no')}"></td>
        
        
        b. /src/main/resources/templates/menu/menu.html
            - form tagë¡œ tableë¥¼ ê°ì‹¸ì¤Œ(actionì— ê°’ì„ ë¶€ì—¬í•˜ì—¬ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ í–‰ìœ„í•˜ê¸° ìœ„í•¨)
            
                <!-- Post ë°©ì‹ìœ¼ë¡œ ë°›ìœ¼ë©° actionì— Controller Mapping ê°’ìœ¼ë¡œ ì„¤ì •(/src/main/java/com/boot/sailing/controller/MenuCon.java) -->
                <!-- nameë“¤ì€ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì§€ì •í•œ ì»¬ëŸ¼ ê°’ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•´ì•¼ í•¨ -->   
                <form name="formTable" id="IdFormTable" method="post" action="/ "> 
                <table class="table">
                <thead>                 
                <!--MenuConì— listì— ë„£ì€ ê°’ì„ í˜¸ì¶œ -->
                <!-- Thymeleaf - for loop -->      
                <tr th:each="prod : ${list}">
                  <td><input type="checkBox" name="chkCoffeeNo" th:value="${prod.get('no')}"></td>
                  <td th:text="${prod.get('no')}">ì»¤í”¼No</th>
                  <td th:text="${prod.get('coffee')}">ë©”ë‰´ëª…</td>
                  <td th:text="${prod.get('kind')}">ì¢…ë¥˜</td>
                  <td th:text="${prod.get('price')}">ê°€ê²©</td>
                  <td th:text="${prod.get('reg_day')}">ë“±ë¡ì¼</td>
                  <td th:text="${prod.get('mod_day')}">ìˆ˜ì •ì¼</td>
                  <td><a th:href="@{/menu_up(no=${prod.get('no')})}">ìˆ˜ì •</a></td>
                  <td><a th:href="@{/menu_del(no=${prod.get('no')})}">ì‚­ì œ</a></td>
                </tr>
                  
                </tbody>
                </table>
                </form> 
                

    b. Controller
        - /src/main/java/com/boot/sailing/controller/MenuCon.java
            
            /*
             * [UPDATE] - ë‹¤ì¤‘ ê°€ê²© ë°ì´í„° ìˆ˜ì •
             * [INSERT] - ìˆ˜ì •í•œ ê°€ê²© ë°ì´í„° ë“±ë¡
             * menu.html ì—ì„œ <td><input type="checkBox" name="chkCoffeeNo" th:value="${prod.get('no')}"></td> ì˜ nameê°’ì„ @RequestParam ì ìŒ
             * menu.html ì—ì„œ <input type="hidden" name="hidden_price">ì˜ nameê°’ì„ @RequestParam ì ìŒ
             */
            @PostMapping("/menu_updatePrice")
            public String doUpdatePrice(@RequestParam("chkCoffeeNo") List<String> chkList, @RequestParam("hidden_price") String strPrice) {
                
                if(chkList != null) {
                    // for(ë³€ìˆ˜ ì„ ì–¸(type ë³€ìˆ˜ëª…) : ë°°ì—´)
                    for(String strNo : chkList) {
                        
                        int int1 = menuSvc.doUpdatePrice(strNo, strPrice); // [UPDATE] - ë‹¤ì¤‘ ê°€ê²© ë°ì´í„° ìˆ˜ì •
                        int int2 = menuSvc.doInsertLog(strNo, strPrice); // [INSERT] - ìˆ˜ì •í•œ ê°€ê²© ë°ì´í„° ë“±ë¡
                    }
                }
                    
                return "redirect:/menu";
            }
            
        * ì´ì œ Controller > Serviceë¡œ ì ‘ê·¼í•´ì•¼ í•˜ë‹ˆ ì—¬ê¸°ì„œëŠ” menuSvc.doInsert()ë¡œ ì„¤ì •í•œë‹¤.
            
            
    c. Serivce
        - /src/main/java/com/boot/sailing/service/MenuSvc.java
        
            /* [UPDATE] - ë‹¤ì¤‘ ê°€ê²© ë°ì´í„° ìˆ˜ì • */
            public int doUpdatePrice(String strNo, String strPrice) {
                int int1 = menuDao.doUpdatePrice(strNo, strPrice);
                return int1;
            }

            /* [INSERT] - ìˆ˜ì •í•œ ê°€ê²© ë°ì´í„° ë“±ë¡ */
            public int doInsertLog(String strNo, String strPrice) {
                int int2 = menuDao.doInsertLog(strNo, strPrice);
                return int2;
            }
        
        * ì´ì œ Service > Daoë¡œ ì ‘ê·¼í•´ì•¼ í•˜ë‹ˆ ì—¬ê¸°ì„œëŠ” menuDao.doInsert()ë¡œ ì„¤ì •í•œë‹¤.
        
        
    d. Dao
        - /src/main/java/com/boot/sailing/dao/MenuDao.java
        
            @Mapper
            public interface MenuDao {
                
                /* [UPDATE] - ë‹¤ì¤‘ ê°€ê²© ë°ì´í„° ìˆ˜ì • */
                int doUpdatePrice(@Param("strNo") String no, @Param("strPrice") String price);
                
                /* [INSERT] - ìˆ˜ì •í•œ ê°€ê²© ë°ì´í„° ë“±ë¡ */
                int doInsertLog(@Param("strNo") String no, @Param("strPrice") String price);
            }
        
        * ì´ì œ Dao > Mapperë¡œ ì ‘ê·¼í•˜ë©´ ëœë‹¤


    e. Mapper
        - /src/main/resources/sqlmapper/CoffeeMenu.xml
        
            <!-- [UPDATE] - ë‹¤ì¤‘ ê°€ê²© ë°ì´í„° ìˆ˜ì • --> 
            <!-- idëŠ” Daoì˜ ë©”ì†Œë“œ ì´ë¦„: doSearch -->
            <update id="doUpdatePrice">
                  Update coffee_menu
                  SET
                    price = CAST(#{strPrice} as INTEGER)
                  Where no = CAST(#{strNo} as INTEGER)
            </update>
           
            
            <!-- [INSERT] - ê°€ê²© ë¡œê·¸ ë°ì´í„° ë“±ë¡ --> 
            <!-- idëŠ” Daoì˜ ë©”ì†Œë“œ ì´ë¦„: doInsertLog -->
            <insert id="doInsertLog">
                INSERT INTO log (coffee_no, price)
                VALUES (#{strNo}, CAST(#{strPrice} as INTEGER))
            </insert>